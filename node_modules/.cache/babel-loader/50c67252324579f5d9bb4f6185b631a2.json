{"remainingRequest":"/home/nick/Документы/front/node_modules/babel-loader/lib/index.js!/home/nick/Документы/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nick/Документы/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nick/Документы/front/src/components/order/EditOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nick/Документы/front/src/components/order/EditOrder.vue","mtime":1550446216491},{"path":"/home/nick/Документы/front/node_modules/cache-loader/dist/cjs.js","mtime":1550345624276},{"path":"/home/nick/Документы/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nick/Документы/front/node_modules/cache-loader/dist/cjs.js","mtime":1550345624276},{"path":"/home/nick/Документы/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport _JSON$stringify from \"/home/nick/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/front/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { HTTP } from '@/util/http';\nimport toast from '@/util/toast';\nexport default {\n  name: \"editOrder\",\n  props: ['order'],\n  data: function data() {\n    return {\n      errors: [],\n      datetime13: this.order.datetime13,\n      toAddress: this.order.toAddress,\n      fromAddress: this.order.fromAddress\n    };\n  },\n  methods: {\n    checkForm: function checkForm(e) {\n      this.errors = [];\n\n      if (!this.toAddress) {\n        this.errors.push(\"Where we go?\");\n      } else if (!this.fromAddress) {\n        this.errors.push(\"From where we are going?\");\n      }\n\n      if (!this.errors.length) {\n        this.submitUpdateOrder();\n        this.datetime13, this.toAddress, this.fromAddress;\n      }\n\n      e.preventDefault();\n    },\n    submitUpdateOrder: function submitUpdateOrder() {\n      var _this = this;\n\n      var retry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      HTTP.patch('taxi/order/taxi/' + this.order.UID, _JSON$stringify({\n        \"user_id\": localStorage.getItem(UID),\n        \"user_name\": this.login.username,\n        'time': this.datetime13.toString(),\n        'from_address': this.fromAddress,\n        \"to_address\": this.toAddress\n      }), {\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('accessToken')\n        }\n      }).then(function () {\n        toast.success('Order updated');\n\n        _this.$parent.closeEditForm();\n      }); // .catch(error => {\n      // if (retry && error.response.status === 403) {\n      //     if (localStorage.getItem('refreshToken')) {\n      //         this.$store.dispatch('refresh')\n      //         this.submitPost(retry = false)\n      //     } else {\n      //         this.$store.dispatch('logout')\n      //         this.$router.push('/login/')\n      //     }\n      // }\n\n      toast.error(error.message); //   })\n    },\n    cancel: function cancel() {\n      this.$parent.closeEditForm();\n    }\n  }\n};",{"version":3,"sources":["EditOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,SAAA,IAAA,QAAA,aAAA;AACA,OAAA,KAAA,MAAA,cAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA,CAAA,OAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,KAAA,KAAA,CAAA,UAFA;AAGA,MAAA,SAAA,EAAA,KAAA,KAAA,CAAA,SAHA;AAIA,MAAA,WAAA,EAAA,KAAA,KAAA,CAAA;AAJA,KAAA;AAMA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,CADA,EACA;AACA,WAAA,MAAA,GAAA,EAAA;;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,cAAA;AACA,OAFA,MAEA,IAAA,CAAA,KAAA,WAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,0BAAA;AACA;;AACA,UAAA,CAAA,KAAA,MAAA,CAAA,MAAA,EAAA;AACA,aAAA,iBAAA;AACA,aAAA,UAAA,EACA,KAAA,SADA,EAEA,KAAA,WAFA;AAGA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,KAfA;AAgBA,IAAA,iBAhBA,+BAgBA;AAAA;;AAAA,UAAA,KAAA,uEAAA,IAAA;AACA,MAAA,IAAA,CAAA,KAAA,CAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,EAAA,gBAAA;AACA,mBAAA,YAAA,CAAA,OAAA,CAAA,GAAA,CADA;AAEA,qBAAA,KAAA,KAAA,CAAA,QAFA;AAGA,gBAAA,KAAA,UAAA,CAAA,QAAA,EAHA;AAIA,wBAAA,KAAA,WAJA;AAKA,sBAAA,KAAA;AALA,OAAA,CAAA,EAMA;AAAA,QAAA,OAAA,EAAA;AAAA,2BAAA,YAAA,YAAA,CAAA,OAAA,CAAA,aAAA;AAAA;AAAA,OANA,EAOA,IAPA,CAOA,YAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,eAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,aAAA;AACA,OAVA,EADA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAtBA,CAuBA;AACA,KAxCA;AAyCA,IAAA,MAzCA,oBAyCA;AACA,WAAA,OAAA,CAAA,aAAA;AACA;AA3CA;AAXA,CAAA","sourcesContent":["<template>\n    <div class=\"container\">\n        <form @submit=\"checkForm\" novalidate=\"true\">\n            <div class=\"row error\" v-if=\"errors.length\">\n                <b>Please correct the following error(s):</b>\n                <ul>\n                    <li v-for=\"error in errors\" :key=\"error\">{{ error }}</li>\n                </ul>\n            </div>\n            <p>\n                <label>Input Time</label>\n                <datetime type=\"datetime\" v-model=\"datetime13\" format=\"yyyy-MM-dd HH:mm:ss\" name =\"datetime13\"></datetime>\n            </p>\n\n            <p>\n                <label for=\"toAddress\">Input To Address</label>\n                <input id=\"toAddress\" v-model=\"toAddress\" type=\"text\" name=\"toAddress\">\n            </p>\n\n            <p>\n                <label for=\"fromAddress\">Input To Address</label>\n                <input id=\"fromAddress\" v-model=\"fromAddress\" type=\"text\" name=\"fromAddress\">\n            </p>\n\n            <p>\n                <input class=\"button-primary\" type=\"submit\"  value=\"Change\">\n            </p>\n            <p>\n            <div class=\"button button-outline\" style=\"margin-left:10px;\" @click=\"cancel\">Cancel</div>\n        </form>\n    </div>\n</template>\n\n<script>\n    import {HTTP} from '@/util/http'\n    import toast from '@/util/toast'\n    export default {\n        name: \"editOrder\",\n        props: ['order'],\n    data () {\n        return {\n            errors: [],\n            datetime13: this.order.datetime13,\n            toAddress: this.order.toAddress,\n            fromAddress :this.order.fromAddress\n        }\n    },\n    methods: {\n        checkForm(e) {\n            this.errors = [];\n            if (!this.toAddress) {\n                this.errors.push(\"Where we go?\")\n            } else if (!this.fromAddress) {\n                this.errors.push(\"From where we are going?\")\n            }\n            if (!this.errors.length) {\n                this.submitUpdateOrder()\n                this.datetime13,\n                    this.toAddress,\n                    this.fromAddress\n            }\n            e.preventDefault()\n        },\n        submitUpdateOrder(retry = true) {\n            HTTP.patch('taxi/order/taxi/' + this.order.UID, JSON.stringify({\n                \"user_id\": localStorage.getItem(UID),\n                \"user_name\": this.login.username,\n                'time': this.datetime13.toString(),\n                'from_address': this.fromAddress,\n                \"to_address\": this.toAddress\n            }), {headers: {'Authorization': 'Bearer ' + localStorage.getItem('accessToken')}})\n                .then(() => {\n                    toast.success('Order updated')\n                    this.$parent.closeEditForm()\n                })\n               // .catch(error => {\n                    // if (retry && error.response.status === 403) {\n                    //     if (localStorage.getItem('refreshToken')) {\n                    //         this.$store.dispatch('refresh')\n                    //         this.submitPost(retry = false)\n                    //     } else {\n                    //         this.$store.dispatch('logout')\n                    //         this.$router.push('/login/')\n                    //     }\n                    // }\n                    toast.error(error.message)\n             //   })\n        },\n        cancel() {\n            this.$parent.closeEditForm()\n        }\n    }\n}\n</script>\n"],"sourceRoot":"src/components/order"}]}